@layer base {
  :root {
    /* Échelle de base pour la typographie */
    --font-scale-ratio: 1.25;
    
    /* Tailles de base */
    --font-size-xs: clamp(0.75rem, 1.5vw, 0.875rem);
    --font-size-sm: clamp(0.875rem, 2vw, 1rem);
    --font-size-base: clamp(1rem, 2.5vw, 1.125rem);
    --font-size-lg: clamp(1.125rem, 3vw, 1.25rem);
    --font-size-xl: clamp(1.25rem, 3.5vw, 1.5rem);
    --font-size-2xl: clamp(1.5rem, 4vw, 1.875rem);
    --font-size-3xl: clamp(1.875rem, 5vw, 2.25rem);
    --font-size-4xl: clamp(2.25rem, 6vw, 3rem);
    --font-size-5xl: clamp(3rem, 8vw, 3.75rem);
    --font-size-6xl: clamp(3.75rem, 10vw, 4.5rem);
    
    /* Interlignage adaptatif */
    --line-height-tight: 1.25;
    --line-height-snug: 1.375;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --line-height-loose: 2;
    
    /* Espacement des lettres */
    --letter-spacing-tighter: -0.05em;
    --letter-spacing-tight: -0.025em;
    --letter-spacing-normal: 0em;
    --letter-spacing-wide: 0.025em;
    --letter-spacing-wider: 0.05em;
    --letter-spacing-widest: 0.1em;
  }
  
  html {
    font-family: 'Open Sans', ui-sans-serif, system-ui, sans-serif;
  }
}

@layer utilities {
  /* --- NOUVELLES CLASSES DE POLICE POUR LA HIÉRARCHIE --- */

  /* Titres principaux */
  .font-title, .heading-display, .heading-h1, .heading-h2, .heading-h3, .heading-h4, .heading-h5, .heading-h6, .responsive-title {
    font-family: 'Montserrat', ui-sans-serif, system-ui, sans-serif !important;
    font-weight: 500;
    letter-spacing: var(--letter-spacing-tight);
  }

  /* Sous-titres */
  .responsive-subtitle {
    font-family: 'Montserrat', ui-sans-serif, system-ui, sans-serif !important;
    font-weight: 600;
    letter-spacing: var(--letter-spacing-normal);
  }

  /* Corps de texte */
  .body-large, .body-normal, .body-small, .responsive-body, .responsive-card-description, p, li, ul, ol, td, th {
    font-family: 'Open Sans', ui-sans-serif, system-ui, sans-serif !important;
    font-weight: 400;
    letter-spacing: var(--letter-spacing-normal);
  }

  /* Texte ludique / enfant */
  .font-ludic, .ludic, .funny-text, .children-text {
    font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif !important;
    font-weight: 700;
    letter-spacing: var(--letter-spacing-wide);
  }

  /* Code/équations */
  .font-code, code, pre, .equation, .math-display, .monospace {
    font-family: 'Fira Code', 'SFMono-Regular', 'Menlo', 'monospace' !important;
    font-weight: 500;
    letter-spacing: var(--letter-spacing-normal);
    font-size: 0.98em;
    background: #f8fafc;
  }

  /* Caption/labels (pour accessibilité) */
  .caption, .label, .a11y-label {
    font-family: 'Open Sans', ui-sans-serif, system-ui, sans-serif !important;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: hsl(var(--muted-foreground));
  }

  /* Classes utilitaires pour la typographie responsive */
  .text-fluid-xs {
    font-size: var(--font-size-xs);
    line-height: var(--line-height-normal);
  }
  
  .text-fluid-sm {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
  }
  
  .text-fluid-base {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
  }
  
  .text-fluid-lg {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-snug);
  }
  
  .text-fluid-xl {
    font-size: var(--font-size-xl);
    line-height: var(--line-height-snug);
  }
  
  .text-fluid-2xl {
    font-size: var(--font-size-2xl);
    line-height: var(--line-height-tight);
  }
  
  .text-fluid-3xl {
    font-size: var(--font-size-3xl);
    line-height: var(--line-height-tight);
  }
  
  .text-fluid-4xl {
    font-size: var(--font-size-4xl);
    line-height: var(--line-height-tight);
  }
  
  .text-fluid-5xl {
    font-size: var(--font-size-5xl);
    line-height: var(--line-height-tight);
  }
  
  .text-fluid-6xl {
    font-size: var(--font-size-6xl);
    line-height: var(--line-height-tight);
  }

  /* Classes pour les titres responsives */
  .heading-display {
    font-size: var(--font-size-6xl);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tighter);
    font-weight: 800;
  }
  
  .heading-h1 {
    font-size: var(--font-size-5xl);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
    font-weight: 700;
  }
  
  .heading-h2 {
    font-size: var(--font-size-4xl);
    line-height: var(--line-height-snug);
    letter-spacing: var(--letter-spacing-tight);
    font-weight: 600;
  }
  
  .heading-h3 {
    font-size: var(--font-size-3xl);
    line-height: var(--line-height-snug);
    font-weight: 600;
  }
  
  .heading-h4 {
    font-size: var(--font-size-2xl);
    line-height: var(--line-height-snug);
    font-weight: 600;
  }
  
  .heading-h5 {
    font-size: var(--font-size-xl);
    line-height: var(--line-height-normal);
    font-weight: 500;
  }
  
  .heading-h6 {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-normal);
    font-weight: 500;
  }

  /* Classes pour le corps de texte */
  .body-large {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-relaxed);
  }
  
  .body-normal {
    font-size: var(--font-size-base);
    line-height: var(--line-height-relaxed);
  }
  
  .body-small {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
  }
  
  .caption {
    font-size: var(--font-size-xs);
    line-height: var(--line-height-normal);
    color: hsl(var(--muted-foreground));
  }

  /* Interlignage adaptatif pour la lecture */
  .reading-comfort {
    line-height: var(--line-height-loose);
    letter-spacing: var(--letter-spacing-wide);
  }

  /* Media queries pour des ajustements fins */
  @media (max-width: 640px) {
    :root {
      /* Réduction légère des tailles sur très petits écrans */
      --font-size-xs: clamp(0.7rem, 2vw, 0.8rem);
      --font-size-sm: clamp(0.8rem, 2.5vw, 0.9rem);
      --font-size-base: clamp(0.9rem, 3vw, 1rem);
      --font-size-lg: clamp(1rem, 3.5vw, 1.125rem);
      --font-size-xl: clamp(1.125rem, 4vw, 1.25rem);
      --font-size-2xl: clamp(1.25rem, 5vw, 1.5rem);
      --font-size-3xl: clamp(1.5rem, 6vw, 1.875rem);
      --font-size-4xl: clamp(1.875rem, 7vw, 2.25rem);
      --font-size-5xl: clamp(2.25rem, 8vw, 2.75rem);
      --font-size-6xl: clamp(2.75rem, 9vw, 3.25rem);
      
      /* Interlignage plus serré sur mobile pour optimiser l'espace */
      --line-height-tight: 1.2;
      --line-height-snug: 1.3;
      --line-height-normal: 1.4;
      --line-height-relaxed: 1.5;
    }
  }

  @media (min-width: 1024px) {
    :root {
      /* Augmentation progressive sur grands écrans */
      --font-size-xs: clamp(0.8rem, 1vw, 0.875rem);
      --font-size-sm: clamp(0.9rem, 1.2vw, 1rem);
      --font-size-base: clamp(1rem, 1.5vw, 1.125rem);
      --font-size-lg: clamp(1.125rem, 2vw, 1.25rem);
      --font-size-xl: clamp(1.25rem, 2.5vw, 1.5rem);
      --font-size-2xl: clamp(1.5rem, 3vw, 1.875rem);
      --font-size-3xl: clamp(1.875rem, 4vw, 2.25rem);
      --font-size-4xl: clamp(2.25rem, 5vw, 3rem);
      --font-size-5xl: clamp(3rem, 6vw, 3.75rem);
      --font-size-6xl: clamp(3.75rem, 7vw, 4.5rem);
    }
  }

  @media (min-width: 1440px) {
    :root {
      /* Limitation sur très grands écrans pour éviter des textes trop grands */
      --font-size-4xl: 3rem;
      --font-size-5xl: 3.75rem;
      --font-size-6xl: 4.5rem;
    }
  }
}

/* Classes pour des cas d'usage spécifiques */
@layer components {
  .responsive-title {
    @apply heading-h1 font-title gradient-text;
  }
  
  .responsive-subtitle {
    @apply heading-h3 font-title text-muted-foreground;
  }

  .ludic-text {
    @apply font-ludic text-xl text-amber-600;
  }

  .responsive-body {
    @apply body-normal font-body;
  }
  
  .responsive-card-title {
    @apply heading-h4 font-title;
  }
  
  .responsive-card-description {
    @apply body-small text-muted-foreground font-body;
  }
}
